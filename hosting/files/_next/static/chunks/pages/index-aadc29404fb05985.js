(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(6247)}])},6247:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var n,s,i,l,o,r,c,d,h,m,u=a(5893),f=a(4791),g=a.n(f);(n=o||(o={})).TRANSCRIPT="transcript",n.FUNCTION_CALL="function-call",n.FUNCTION_CALL_RESULT="function-call-result",n.ADD_MESSAGE="add-message",(s=r||(r={})).USER="user",s.SYSTEM="system",s.ASSISTANT="assistant",(i=c||(c={})).PARTIAL="partial",i.FINAL="final";var p=a(7294),x=a(5349),b=a.n(x),w=a(3454);let v={vapi:{apiUrl:null!==(d=w.env.NEXT_PUBLIC_VAPI_API_URL)&&void 0!==d?d:"https://api.vapi.ai",token:null!==(h=w.env.NEXT_PUBLIC_VAPI_WEB_TOKEN)&&void 0!==h?h:"1ec9d220-ea8e-4df7-b82c-967f77c59d4e"}},y=new(b())(v.vapi.token);(l=m||(m={})).INACTIVE="inactive",l.ACTIVE="active",l.LOADING="loading";var N=a(2922),k=a(3217),A=a(7861),j=a(9680),S=a(5139),C=a(512),T=a(8388);let L=(0,S.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",{variants:{variant:{default:"bg-slate-900 text-slate-50 hover:bg-slate-900/90 dark:bg-slate-50 dark:text-slate-900 dark:hover:bg-slate-50/90",destructive:"bg-red-500 text-slate-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",outline:"border border-slate-200 bg-white hover:bg-slate-100 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),E=p.forwardRef((e,t)=>{let{className:a,variant:n,size:s,asChild:i=!1,...l}=e,o=i?j.g7:"button";return(0,u.jsx)(o,{className:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,T.m6)((0,C.W)(t))}(L({variant:n,size:s,className:a})),ref:t,...l})});E.displayName="Button";let D=e=>{let{toggleCall:t,callStatus:a,audioLevel:n=0}=e,[s,i]=(0,p.useState)(!1),l=a===m.ACTIVE?"#C27F54":a===m.LOADING?"#E16269":"#536FA6",o={width:"4em",height:"4em",color:l,opacity:.75},r={borderRadius:"50%",width:"12em",height:"12em",color:"white",border:"none",boxShadow:"1px 1px ".concat(10+40*n,"px ").concat(10*n,"px ").concat(l,", 0px 0px 26px 4px ").concat(l," inset"),backgroundColor:"transparent",cursor:"pointer"},c={boxShadow:"1px 1px ".concat(10+40*n,"px ").concat(10*n,"px ").concat(l,", 0px 0px 52px 8px ").concat(l," inset")};return(0,u.jsx)(E,{onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)},style:{...r,...s&&c},className:"transition ease-in-out flex items-center justify-center",onClick:t,children:a===m.ACTIVE?(0,u.jsx)(N.Z,{style:o}):a===m.LOADING?(0,u.jsx)(k.Z,{style:o,className:"animate-spin"}):(0,u.jsx)(A.Z,{style:o})})},I=e=>{let{callStatus:t}=e,a=t===m.ACTIVE?"#C27F54":t===m.LOADING?"#E16269":"#536FA6",n={marginTop:"1.5em",borderRadius:"1.2em",lineHeight:"2.4em",width:"80%",height:"2.4em",color:a,marginLeft:"auto",marginRight:"auto",boxShadow:"1px 1px 3px 0px ".concat(a,", 0px 0px 6px 1px ").concat(a," inset"),backgroundColor:"transparent",opacity:.9};return"1px 1px ".concat(400,"px ",10,"px ").concat(a,", 0px 0px 52px 8px ").concat(a," inset"),(0,u.jsxs)("div",{style:{...n},className:"transition ease-in-out flex items-center justify-center",children:["inactive"===t&&"Give it a try.","loading"===t&&"One sec...","active"===t&&"Press to stop."]})},_=[{title:"The Notebook",description:"The musical adaptation of Nicholas Sparks' novel comes to Broadway, featuring music by Ingrid Michaelson.",img:"https://imaging.broadway.com/images/poster-178275/w230/222222/126908-15.jpg",theatre:"Schoenfeld Theatre",venue:"236 West 45th Street, New York, NY 10036",story:"Allie and Noah, both from different worlds, share a lifetime of love despite the forces that threaten to pull them apart. With a book that has sold millions of copies worldwide and a film that’s one of the highest-grossing romantic dramas of all-time, the musical adaptation of Nicholas Sparks’s The Notebook comes to Broadway following a critically acclaimed world premiere engagement at Chicago Shakespeare Theater in the fall of 2022.",price:72.89,date:new Date(Date.now()+2592e6*Math.random())},{title:"The Lion King",description:"Pride Rock comes to life in Disney’s long-running hit.",img:"https://imaging.broadway.com/images/poster-178275/w230/222222/123802-3.jpg",theatre:"Minskoff Theatre",venue:"200 West 45th Street, New York, NY 10036",story:"A lively stage adaptation of the Academy Award-winning 1994 Disney film, The Lion King is the story of a young lion prince living in the flourishing African Pride Lands.\n\nWhen an unthinkable tragedy, orchestrated by Simba’s wicked uncle, Scar, takes his father’s life, Simba flees the Pride Lands, leaving his loss and the life he knew behind. Eventually companioned by two hilarious and unlikely friends, Simba starts anew. But when weight of responsibility and a desperate plea from the now ravaged Pride Lands come to find the adult prince, Simba must take on a formidable enemy, and fulfill his destiny to be king.",price:103.45,date:new Date(Date.now()+2592e6*Math.random())},{title:"Aladdin",description:"The beloved Disney story is brought to thrilling theatrical life.",img:"https://imaging.broadway.com/images/poster-178275/w230/222222/111616-4.jpg",theatre:"New Amsterdam Theatre",venue:"214 West 42nd Street, New York, NY 10036",story:"In the middle-eastern town of Agrabah, Princess Jasmine is feeling hemmed in by her father’s desire to find her a royal groom. Meanwhile, the Sultan’s right-hand man, Jafar, is plotting to take over the throne. When Jasmine sneaks out of the palace incognito, she forms an instant connection with Aladdin, a charming street urchin and reformed thief.\n\n \n\n    After being discovered together, Aladdin is sentenced to death, but Jafar saves him by ordering him to fetch a lamp from the Cave of Wonders. Where there’s a lamp, there’s a Genie, and once Aladdin unwittingly lets this one out, anything can happen! Will Aladdin’s new identity as “Prince Ali” help him win Jasmine’s heart and thwart Jafar’s evil plans? Will the Genie’s wish for freedom ever come true?",price:69.62,date:new Date(Date.now()+2592e6*Math.random())},{title:"Days of Wine and Roses",description:"Kelli O'Hara and Brian d'Arcy James star in the Broadway premiere of Adam Guettel and Craig Lucas' new musical.",img:"https://imaging.broadway.com/images/poster-178275/w230/222222/126426-15.jpg",theatre:"Studio 54",venue:"254 West 54th Street, New York, NY 10019",story:"Kelli O’Hara and Brian d’Arcy James star in a searing new musical about a couple falling in love in 1950s New York and struggling against themselves to build their family. The New York Times calls Days of Wine and Roses “a jazzy, aching new musical with wells of compassion!” (Critic’s Pick) and The Washington Post raves, “Kelli O’Hara and Brian d’Arcy James soar! One of the best new musicals this year.”\n      \n      Adapted from JP Miller’s 1962 film and original 1958 teleplay, composer & lyricist Adam Guettel (Floyd Collins) and playwright Craig Lucas (An American in Paris) reunite in their first collaboration since their acclaimed The Light in the Piazza. Directed by Michael Greif (Dear Evan Hansen).",price:69.62,date:new Date(Date.now()+2592e6*Math.random())}];function P(e){let{showList:t=[]}=e;return(0,u.jsx)("div",{className:"flex gap-8 py-4",children:t.map(e=>(0,u.jsxs)("div",{children:[(0,u.jsx)("img",{className:"h-auto my-4 w-full rounded-lg object-cover transition-all hover:scale-105 aspect-[3/4]",src:e.img,alt:e.title}),(0,u.jsx)("h2",{className:"text-xl font-bold",children:e.title}),(0,u.jsxs)("p",{className:"text-gray-500 font-bold",children:[" ",e.theatre]}),(0,u.jsxs)("p",{className:"text-gray-500",children:["$ ",e.price]})]},e.title))})}function W(e){var t;let{type:a="confirm",show:n=_[0],params:s={}}=e;return(0,u.jsx)("div",{className:"bg-slate-100  rounded-xl",children:(0,u.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,u.jsxs)("div",{className:"flex flex-wrap -mx-4",children:[(0,u.jsx)("div",{className:"w-full lg:w-1/2 px-4 mb-8 lg:mb-0",children:(0,u.jsx)("img",{className:"w-full rounded-lg shadow-lg",src:n.img,alt:"Concert Image",width:200})}),(0,u.jsxs)("div",{className:"w-full lg:w-1/2 px-4",children:[(0,u.jsx)("h1",{className:"text-3xl font-bold mb-4",children:n.title}),"ticket"===a?(0,u.jsx)("p",{className:"bg-green-500 text-white rounded-md w-full px-4 py-3 mb-6",children:"Your ticket has been booked successfully."}):null,(0,u.jsx)("p",{className:"text-lg mb-6",children:n.description}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("p",{className:"text-xl font-bold mb-2",children:"When:"}),(0,u.jsx)("p",{className:"text-lg",children:new Date(null!==(t=s.date)&&void 0!==t?t:n.date).toLocaleString()})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("p",{className:"text-xl font-bold mb-2",children:"Where:"}),(0,u.jsx)("p",{className:"text-lg",children:n.theatre}),(0,u.jsx)("p",{className:"text-lg",children:n.venue})]}),(0,u.jsxs)("div",{className:"mb-6",children:[(0,u.jsx)("p",{className:"text-xl font-bold mb-2",children:"Tickets:"}),(0,u.jsxs)("p",{className:"text-lg",children:["$",n.price," - General Admission"]})]}),"confirm"==a?(0,u.jsx)("button",{onClick:()=>{y.send({type:o.ADD_MESSAGE,message:{role:"user",content:"Looks good to me. Lets go ahead."}})},className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline",type:"button",children:"Confirm Bookings"}):null]})]})})})}function O(){let[e,t]=p.useState([]),[a,n]=p.useState("show"),[s,i]=p.useState(null),[l,r]=p.useState();return(0,p.useEffect)(()=>{let e=e=>{if(e.type===o.FUNCTION_CALL&&"suggestShows"===e.functionCall.name)n("show"),y.send({type:o.ADD_MESSAGE,message:{role:"system",content:"Here is the list of suggested shows: ".concat(JSON.stringify(_.map(e=>e.title)))}}),t(_);else if(e.type===o.FUNCTION_CALL&&("confirmDetails"===e.functionCall.name||"bookTickets"===e.functionCall.name)){let t=e.functionCall.parameters;r(t),console.log("parameters",t);let a=_.find(e=>e.title.toLowerCase()==t.show.toLowerCase());i(null!=a?a:_[0]),n("confirmDetails"===e.functionCall.name?"confirm":"ticket")}},a=()=>{n("show"),t([]),i(null)};return y.on("message",e),y.on("call-end",a),()=>{y.off("message",e),y.off("call-end",a)}},[]),(0,u.jsxs)(u.Fragment,{children:[e.length>0&&"show"==a?(0,u.jsx)(P,{showList:e}):null,"show"!==a?(0,u.jsx)(W,{type:a,show:null!=s?s:_[0],params:l}):null]})}function R(){let{toggleCall:e,callStatus:t,audioLevel:a}=function(){let[e,t]=(0,p.useState)(!1),[a,n]=(0,p.useState)("inactive"),[s,i]=(0,p.useState)([]),[l,r]=(0,p.useState)(null),[d,h]=(0,p.useState)(0);(0,p.useEffect)(()=>{let e=()=>t(!0),a=()=>{console.log("Speech has ended"),t(!1)},s=()=>{console.log("Call has started"),n("active")},l=()=>{console.log("Call has stopped"),n("inactive")},d=e=>{h(e)},m=e=>{console.log("message",e),e.type===o.TRANSCRIPT&&e.transcriptType===c.PARTIAL?r(e):(i(t=>[...t,e]),r(null))},u=e=>{n("inactive"),console.error(e)};return y.on("speech-start",e),y.on("speech-end",a),y.on("call-start",s),y.on("call-end",l),y.on("volume-level",d),y.on("message",m),y.on("error",u),()=>{y.off("speech-start",e),y.off("speech-end",a),y.off("call-start",s),y.off("call-end",l),y.off("volume-level",d),y.off("message",m),y.off("error",u)}},[]);let m=async()=>{n("loading"),console.log("before start"),y.start("68557fad-293d-4d3c-9c1b-2a30aac8ae41").then(e=>{console.log("call",e)})},u=()=>{n("loading"),y.stop()};return{isSpeechActive:e,callStatus:a,audioLevel:d,activeTranscript:l,messages:s,start:m,stop:u,toggleCall:()=>{"active"==a?u():m()}}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"chat-history",children:(0,u.jsx)(O,{})}),(0,u.jsxs)("div",{className:"user-input",children:[(0,u.jsx)(D,{audioLevel:a,callStatus:t,toggleCall:e}),(0,u.jsx)(I,{callStatus:t})]})]})}function M(){return(0,u.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-center p-12 ".concat(g().className),children:(0,u.jsx)(R,{})})}}},function(e){e.O(0,[789,880,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);